import{m,_ as b,o as c,b as r,d as t,t as d,j as P,v as M,F as p,k as g,h as y,f as E,r as f,e as v}from"./index-CgHBEOTy.js";import{c as $}from"./cartStore-CcZ1MGtz.js";import{m as C}from"./modalMixin-oCo5jlFQ.js";import{s as L}from"./sweetAlertStore-w7mpYN6A.js";const V={props:{tempProduct:{}},data(){return{modal:null,editProduct:{},qty:1}},methods:{...m($,["addToCart"]),addAndHide(o,i){this.addToCart(o,i),this.hideModal(),this.qty=1}},watch:{tempProduct(){this.editProduct=this.tempProduct}},mixins:[C]},S={id:"shopModal",class:"modal fade",ref:"modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},k={class:"modal-dialog modal-dialog-centered"},T={class:"modal-content"},j=t("button",{type:"button","data-bs-dismiss":"modal","aria-label":"Close",class:"btn-close position-absolute p-2 m-2 top-0 end-0 rounded-circle bg-opacity-90 bg-white"},null,-1),q={class:"modal-header p-0 overflow-hidden"},A=["src"],B={class:"modal-body"},U={class:"product-detail row align-content-between"},D={class:"mb-2"},N={class:"fw-bold h1 mb-1 text-primary"},Q={class:"my-1"},R={class:"card-text mb-0"},I={class:"fw-bold fs-4 me-1 text-change"},H={class:"text-muted"},F={class:"modal-footer"},O={class:"col"},z={class:"input-group"},G=["value"],J={class:"col text-end"},K=t("i",{class:"bi bi-cart-fill me-1"},null,-1);function W(o,i,n,l,e,h){return c(),r("div",S,[t("div",k,[t("div",T,[j,t("div",q,[t("img",{src:e.editProduct.imageUrl,class:"card-img-top rounded-0",style:{"object-fit":"cover"},height:"300",alt:"..."},null,8,A)]),t("div",B,[t("div",U,[t("div",D,[t("h2",N,d(e.editProduct.title),1),t("span",Q,d(e.editProduct.description),1)]),t("div",R,[t("span",I,"¥ "+d(e.editProduct.price),1),t("span",H,[t("del",null,"¥ "+d(e.editProduct.origin_price),1)])])])]),t("div",F,[t("div",O,[t("div",z,[P(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":i[0]||(i[0]=a=>e.qty=a),ref:"qtyValue"},[(c(),r(p,null,g(20,a=>t("option",{value:a,key:a},d(a),9,G)),64))],512),[[M,e.qty]])])]),t("div",J,[t("button",{type:"button",class:"btn btn-primary text-white",onClick:i[1]||(i[1]=y(a=>h.addAndHide(e.editProduct.id,this.$refs.qtyValue.value),["prevent"]))},[K,E(" カートに入れる ")])])])])])],512)}const X=b(V,[["render",W]]),Y="/EatBurger/assets/menuBanner-py3pHQTh.jpg";var Z={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_NAME:"eatburgertest",BASE_URL:"/EatBurger/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:u,VITE_NAME:_}=Z,tt={data(){return{isLoading:!1,products:[],tempProduct:{},categories:["全て","バーガー","サイド","ドリンク"],homeQuery:this.$route.query.category}},methods:{...m($,["addToCart"]),...m(L,["swalError"]),getProducts(){this.isLoading=!0,this.homeQuery===void 0?this.$http.get(`${u}/v2/api/${_}/products/all`).then(o=>{this.products=o.data.products,this.isLoading=!1}).catch(()=>{this.swalError()}):(this.$refs.categorySelect.value=this.homeQuery,this.$http.get(`${u}/v2/api/${_}/products?category=${this.$refs.categorySelect.value}`).then(o=>{this.products=o.data.products,this.homeQuery=void 0,this.isLoading=!1}).catch(()=>{this.swalError()}))},changeCategory(o,i=1){this.isLoading=!0;const n=o.target.value;n==="全て"?this.getProducts():this.$http.get(`${u}/v2/api/${_}/products?category=${n}&page=${i}`).then(l=>{this.products=l.data.products,this.pages=l.data.pagination,this.isLoading=!1}).catch(()=>{this.swalError()})},openModal(o){this.tempProduct={...o},this.$refs.sModal.openModal()}},mounted(){this.getProducts()},components:{ShopModal:X}},et={class:"container"},st=t("section",{class:"position-relative"},[t("img",{src:Y,class:"card-img-top menu-banner",alt:"..."}),t("h2",{class:"fs-5r fw-bold position-absolute bg-primary bg-opacity-50 text-white text-center top-50 start-50 translate-middle w-75 p-3"}," メニュー ")],-1),ot={class:"category-select position-relative col-6 col-md-2 mb-4 mt-5"},it=["value"],dt={class:"row product-cards-list justify-content-center"},at=["onClick"],ct={class:"product-img rounded-top overflow-hidden"},rt=["src"],nt={class:"card-body"},lt={class:"mb-4 text-primary fw-bolder fs-4"},ht={class:"d-flex flex-nowrap justify-content-between"},pt={class:"card-text mb-0"},ut={class:"fw-bold fs-4 me-1 text-change"},_t={class:"text-muted"},mt=["onClick"],gt=t("i",{class:"bi bi-cart-fill me-1"},null,-1),ft=t("span",{class:"fs-6"},"カートに入れる",-1),vt=[gt,ft];function bt(o,i,n,l,e,h){const a=f("VLoading"),w=f("ShopModal");return c(),r(p,null,[v(a,{active:e.isLoading},null,8,["active"]),t("div",et,[st,t("div",ot,[t("select",{name:"",id:"",onChange:i[0]||(i[0]=s=>h.changeCategory(s)),ref:"categorySelect",class:"bg-primary text-white w-100 rounded-pill fs-5 py-2 px-3 border-0"},[(c(!0),r(p,null,g(e.categories,s=>(c(),r("option",{value:s,key:s},d(s),9,it))),128))],544)]),t("div",dt,[(c(!0),r(p,null,g(e.products,s=>(c(),r("div",{class:"col-md-4",key:s.id},[t("div",{class:"product-cards card border-0 mb-4",onClick:x=>h.openModal(s)},[t("div",ct,[t("img",{src:s.imageUrl,class:"card-img-top rounded-0",style:{"object-fit":"cover"},height:"300",alt:"..."},null,8,rt)]),t("div",nt,[t("h3",lt,d(s.title),1),t("div",ht,[t("p",pt,[t("span",ut,"¥ "+d(s.price),1),t("span",_t,[t("del",null,"¥ "+d(s.origin_price),1)])]),t("button",{type:"button",class:"btn btn-primary text-white d-flex justify-content-end",onClick:y(x=>o.addToCart(s.id,1),["stop"])},vt,8,mt)])])],8,at)]))),128))])]),v(w,{"temp-product":e.tempProduct,ref:"sModal"},null,8,["temp-product"])],64)}const Pt=b(tt,[["render",bt]]);export{Pt as default};
