import{_ as g,m as a,r as b,o as n,b as r,e as x,d as t,j as v,l as O,F as m,k as w,t as d,s as y}from"./index-CgHBEOTy.js";import{s as _}from"./sweetAlertStore-w7mpYN6A.js";var k={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_NAME:"eatburgertest",BASE_URL:"/EatBurger/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:p,VITE_NAME:f}=k,D={data(){return{isLoading:!1,isSearch:!1,tempOrder:[],order_id:""}},methods:{...a(_,["swalError"]),...a(_,["successToast"]),...a(_,["errorToast"]),getOrder(){this.order_id!==""&&(this.isLoading=!0,this.$http.get(`${p}/v2/api/${f}/order/${this.order_id}`).then(i=>{this.tempOrder=i.data.order,this.isSearch=!0,this.isLoading=!1}).catch(()=>{this.isLoading=!1,this.swalError()}))},switchDate(i){const e=new Date(i*1e3);let h=`${e.getFullYear()}-`,u=`${e.getMonth()+1<10?`0${e.getMonth()+1}`:e.getMonth()+1}-`,s=`${e.getDate()<10?`0${e.getDate()}`:e.getDate()} `,l=`${e.getHours()<10?`0${e.getHours()}`:e.getHours()}:`,c=e.getMinutes()<10?`0${e.getMinutes()}`:e.getMinutes();return h+u+s+l+c},checkPaid(){this.tempOrder.is_paid===!1&&this.$http.post(`${p}/v2/api/${f}/pay/${this.tempOrder.id}`).then(()=>{this.getOrder(),this.successToast("お支払いが完了しました")}).catch(()=>{this.errorToast("お手数ですが、もう一度やり直してください")})}}},E={class:"container pt-5"},M={class:"row justify-content-center mb-5"},V={class:"col-md-8 d-flex flex-column align-items-center"},L=t("h2",{class:"fs-1 fw-bold mb-5"},"注文検索",-1),S={class:"input-group mb-5"},T={key:0,class:"d-flex flex-column align-items-center"},A=t("i",{class:"bi bi-clipboard-x-fill fs-8r text-secondary"},null,-1),B=t("span",{class:"fs-3 mb-4 text-secondary"},"ご注文番号が正しくありません",-1),N=[A,B],R={key:1,class:"col-md-10"},U={class:"row d-flex flex-column-reverse flex-md-row"},C={class:"col-md-7"},I={class:"bg-white p-3"},F=t("h2",null,"ご注文内容",-1),H={class:"table align-middle mb-2"},P=t("thead",null,null,-1),j={class:"d-flex flex-column-reverse d-md-block"},Y=["src"],q={class:"text-primary fw-bold fs-6 ms-0 ms-md-3"},z={class:"text-danger fs-5 text-end"},G={class:"text-change fw-bold fs-5 text-end"},J={class:"text-end"},K=t("span",{class:"text-danger fw-bold fs-3 me-4"},"合計",-1),Q={class:"text-danger fw-bold fs-4 me-2"},W={class:"col-md-5 mb-3 mb-md-0"},X=t("div",{class:"bg-dark p-2"},[t("h3",{class:"text-center text-white"},"お客様情報")],-1),Z={class:"bg-white p-3"},$={class:"table mb-2"},tt=t("thead",null,null,-1),et=t("th",null,"ご注文番号",-1),st={class:"text-end"},ot=t("th",null,"注文日時",-1),dt={class:"text-end"},nt=t("th",null,"お名前",-1),rt={class:"text-end"},lt=t("th",null,"携帯電話番号",-1),it={class:"text-end"},ct=t("th",null,"メールアドレス",-1),at={class:"text-end"},_t=t("th",null,"お届け先",-1),ht={class:"text-end"},ut=t("th",null,"備考欄",-1),mt={key:0,class:"text-end"},pt={key:1,class:"text-end"},ft=t("th",null,"お支払い状況",-1),gt={key:0,class:"text-success text-end fw-bold"},bt={key:1,class:"text-danger text-end fw-bold"},xt={class:"text-end"};function vt(i,e,h,u,s,l){const c=b("VLoading");return n(),r(m,null,[x(c,{active:s.isLoading},null,8,["active"]),t("div",E,[t("div",M,[t("div",V,[L,t("div",S,[v(t("input",{type:"text",class:"form-control",placeholder:"ご注文番号を入力","onUpdate:modelValue":e[0]||(e[0]=o=>s.order_id=o),"aria-label":"ご注文番号を入力","aria-describedby":"button-addon2"},null,512),[[O,s.order_id]]),t("button",{class:"btn btn-dark",type:"button",id:"button-addon2",onClick:e[1]||(e[1]=(...o)=>l.getOrder&&l.getOrder(...o))}," 注文を照会する ")])]),s.isSearch===!0&&s.tempOrder===null?(n(),r("div",T,N)):s.isSearch===!0&&s.tempOrder!==null?(n(),r("div",R,[t("div",U,[t("div",C,[t("div",I,[F,t("table",H,[P,t("tbody",null,[(n(!0),r(m,null,w(s.tempOrder.products,o=>(n(),r("tr",{key:o.id},[t("td",j,[t("img",{src:o.product.imageUrl,class:"cart-list-img card-img-top rounded-0",alt:"..."},null,8,Y),t("span",q,d(o.product.title),1)]),t("td",z,"x "+d(o.qty),1),t("td",G," ¥ "+d(Math.round(o.final_total)),1)]))),128))])]),t("div",J,[K,t("span",Q,"¥ "+d(s.tempOrder.total),1)])])]),t("div",W,[X,t("div",Z,[t("table",$,[tt,t("tbody",null,[t("tr",null,[et,t("td",st,d(s.tempOrder.id),1)]),t("tr",null,[ot,t("td",dt,d(l.switchDate(s.tempOrder.create_at)),1)]),t("tr",null,[nt,t("td",rt,d(s.tempOrder.user.name),1)]),t("tr",null,[lt,t("td",it,d(s.tempOrder.user.tel),1)]),t("tr",null,[ct,t("td",at,d(s.tempOrder.user.email),1)]),t("tr",null,[_t,t("td",ht,d(s.tempOrder.user.address),1)]),t("tr",null,[ut,s.tempOrder.message===void 0?(n(),r("td",mt,"-")):(n(),r("td",pt,d(s.tempOrder.message),1))]),t("tr",null,[ft,s.tempOrder.is_paid===!0?(n(),r("td",gt,"お支払い済み")):(n(),r("td",bt,"ご請求中"))])])]),t("div",xt,[t("button",{class:"btn btn-change",type:"button",id:"button-addon2",onClick:e[2]||(e[2]=o=>l.checkPaid())}," 決済する ")])])])])])):y("",!0)])])],64)}const yt=g(D,[["render",vt]]);export{yt as default};
